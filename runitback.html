<!DOCTYPE html>
<html lang="en">

<head>
    <title>Run It Back</title>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    
    <style type="text/css">
    #pigeonCucc{
        margin-top: 100px;
    }
    #runItBack{
        margin-top: 100px;
    }
    .center{
          margin: auto;
          text-align: center;
    }
    h1{
        margin-top: 30px;
        font-size: 70px;
        font-family: century;
    }
    body{
        pointer-events: none;
        background-color: black;
        color: white;
    }
    </style>

</head> 

<body>
    <h1 class="center">Run It Back</h1>
    <div id="pigeonCucc"class="col-sm-12 col-md-6 center">
    </div>
    
    <div id="runItBack"class="col-sm-12 col-md-6 center">
    </div>
    <script>
        // 2. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');

        tag.src = "https://www.youtube.com/iframe_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);


        // 3. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var runItBack;
        var runItBack_data = {'id': 'runItBack', 'videoId': 'C1aVH8nps08', 'start': 234, 'end': 244 };
        var pigeonCucc;
        var pigeonCucc_data = {'id': 'pigeonCucc', 'videoId': 'k6W3WXhWqn4', 'start': 155, 'end': 170 };
        function onYouTubeIframeAPIReady() {
            runItBack = createiFramePlayer(runItBack_data);
            pigeonCucc = createiFramePlayer(pigeonCucc_data);
        }

        function createiFramePlayer(playerData){
            return new YT.Player(playerData.id, {
                playerVars: { 'autoplay': 1, 'controls': 0, 'start': playerData.start, 'end': playerData.end },
                videoId: playerData.videoId,
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        // 4. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            if(event.target.getVideoData().video_id === pigeonCucc_data.videoId){
                event.target.setVolume(50);
            }
            event.target.playVideo();
        }

        // 5. The API calls this function when the player's state changes.
        var done = false;
        function onPlayerStateChange(event) {
            if (event.data === YT.PlayerState.ENDED) {
                if (event.target.getVideoData().video_id === runItBack_data.videoId){
                    runItBack.loadVideoById({
                        videoId: runItBack_data.videoId,
                        startSeconds: runItBack_data.start,
                        endSeconds: runItBack_data.end
                    });
                }
                else {
                    pigeonCucc.loadVideoById({
                        videoId: pigeonCucc_data.videoId,
                        startSeconds: pigeonCucc_data.start,
                        endSeconds: pigeonCucc_data.end
                    });
                }
            }
        }
    </script>
</body>
